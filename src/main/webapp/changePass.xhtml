<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>パスワード変更</title>
    <meta charset="UTF-8" />
</h:head>
<script>
function checkPassword(){
    const newpass = document.getElementById("chgPassForm:newPass").value;
    const confirm = document.getElementById("chgPassForm:confirmPass").value;
    if (newpass !== confirm){
        document.getElementById("msg").innerHTML = "パスワードが一致しません";
        return false;
    }else{
        document.getElementById("msg").innerHTML = "";
        return true;
    }
}
</script>
<h:body>
    <h2>パスワード変更</h2>
    <h:form id="chgPassForm">
        <h:panelGrid columns="2">
            <h:outputLabel value="現在のパスワード:" />
            <h:inputText value="#{loginUser.currentPassword}" />

            <h:outputLabel value="新しいパスワード:" />
            <h:inputText id="newPass" value="#{loginUser.newPassword}"/>

            <h:outputLabel value="確認パスワード:" />
            <h:inputText id="confirmPass" value="#{loginUser.confirmPassword}" />

            <h:inputHidden id="uid" value="#{loginUser.user.id}" />
            
        </h:panelGrid>

        <h:commandButton value="変更" action="#{loginUser.changePassword}" onclick="return checkPassword();" />
        <h:commandButton value="キャンセル" action="profile.xhtml" />
    </h:form>
    <!-- メッセージ表示 -->
    <h:messages id="msg" globalOnly="true" layout="table" />
</h:body>
</html>
